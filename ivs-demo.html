<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>Amazon IVS Player Demo</title>
  
  <!-- Video.js CSS -->
  <link href="https://vjs.zencdn.net/8.6.1/video-js.css" rel="stylesheet" />
  
  <style>
    body {
      font-family: Arial, sans-serif;
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px;
      background-color: #f5f5f5;
    }
    
    .container {
      background-color: white;
      border-radius: 10px;
      padding: 30px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }
    
    h1 {
      color: #333;
      text-align: center;
      margin-bottom: 30px;
    }
    
    .demo-section {
      margin-bottom: 40px;
    }
    
    h2 {
      color: #666;
      border-bottom: 2px solid #e55050;
      padding-bottom: 10px;
      margin-bottom: 20px;
    }
    
    .two-column {
      display: flex;
      gap: 30px;
      align-items: flex-start;
    }
    
    .column {
      flex: 1;
    }
    
    pre {
      background-color: #f8f8f8;
      border: 1px solid #ddd;
      border-radius: 5px;
      padding: 15px;
      overflow-x: auto;
    }
    
    code {
      font-family: 'Courier New', monospace;
      font-size: 14px;
    }
    
    ul {
      line-height: 1.6;
    }
    
    .video-js {
      width: 100%;
      height: 400px;
    }
    
    .info-box {
      background-color: #e8f4fd;
      border-left: 4px solid #2196F3;
      padding: 15px;
      margin: 20px 0;
      border-radius: 0 5px 5px 0;
    }
    
    .accent-color {
      color: #e55050;
      font-weight: bold;
    }
  </style>
</head>

<body>
  <div class="container">
    <h1>Amazon IVS Player Demo</h1>
    
    <div class="demo-section">
      <h2>Amazon IVS (Interactive Video Service) とは</h2>
      <ul>
        <li>AWS提供の超低遅延ライブストリーミングサービス</li>
        <li>Twitchと同じ技術基盤を使用</li>
        <li>WebRTCベースで1秒以下の遅延を実現</li>
        <li>インタラクティブな配信が可能</li>
        <li>リアルタイムチャット連携可能</li>
      </ul>
      
      <div class="info-box">
        <strong>特徴:</strong> 従来のHLSと比較して大幅に遅延を削減し、視聴者参加型コンテンツに最適
      </div>
    </div>

    <div class="demo-section">
      <h2>Video.js + Amazon IVS Player 統合</h2>
      
      <div class="two-column">
        <div class="column">
          <h3>実装コード</h3>
          <pre><code>// Amazon IVS Tech登録
registerIVSTech(videojs);

// IVS Player初期化
const player = videojs('ivs-player', {
  techOrder: ['AmazonIVS']
}, () => {
  // IVSストリームURL設定
  player.src('stream-url.m3u8');
});

// 自動再生（オプション）
player.ready(() => {
  player.play();
});</code></pre>

          <h3>必要なスクリプト</h3>
          <pre><code>&lt;!-- Video.js --&gt;
&lt;script src="https://vjs.zencdn.net/8.6.1/video.min.js"&gt;&lt;/script&gt;

&lt;!-- Amazon IVS Tech --&gt;
&lt;script src="https://player.live-video.net/1.41.0/amazon-ivs-videojs-tech.min.js"&gt;&lt;/script&gt;</code></pre>
        </div>
        
        <div class="column">
          <h3>ライブデモ</h3>
          <video-js
            id="ivs-player"
            class="vjs-default-skin"
            controls
            preload="auto"
          >
          </video-js>
          
          <div class="info-box">
            <p><span class="accent-color">ストリーム URL:</span></p>
            <p style="font-size: 12px; word-break: break-all;">
              https://e759d28da8d9.ap-northeast-1.playback.live-video.net/api/video/v1/ap-northeast-1.648078772342.channel.sC3cxpRBqR1t.m3u8
            </p>
          </div>
        </div>
      </div>
    </div>

    <div class="demo-section">
      <h2>IVS vs 従来のHLS比較</h2>
      <table style="width: 100%; border-collapse: collapse; margin-top: 20px;">
        <thead>
          <tr style="background-color: #f8f8f8;">
            <th style="border: 1px solid #ddd; padding: 12px; text-align: left;">項目</th>
            <th style="border: 1px solid #ddd; padding: 12px; text-align: left;">従来のHLS</th>
            <th style="border: 1px solid #ddd; padding: 12px; text-align: left;">Amazon IVS</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td style="border: 1px solid #ddd; padding: 12px;">遅延</td>
            <td style="border: 1px solid #ddd; padding: 12px;">10-30秒</td>
            <td style="border: 1px solid #ddd; padding: 12px; color: #e55050; font-weight: bold;">1秒以下</td>
          </tr>
          <tr>
            <td style="border: 1px solid #ddd; padding: 12px;">プロトコル</td>
            <td style="border: 1px solid #ddd; padding: 12px;">HTTP-based</td>
            <td style="border: 1px solid #ddd; padding: 12px;">WebRTC-based</td>
          </tr>
          <tr>
            <td style="border: 1px solid #ddd; padding: 12px;">インタラクティブ機能</td>
            <td style="border: 1px solid #ddd; padding: 12px;">制限あり</td>
            <td style="border: 1px solid #ddd; padding: 12px; color: #e55050; font-weight: bold;">リアルタイム対応</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <!-- Video.js JavaScript -->
  <script src="https://vjs.zencdn.net/8.6.1/video.min.js"></script>
  <!-- Amazon IVS Player Tech for Video.js -->
  <script src="https://player.live-video.net/1.41.0/amazon-ivs-videojs-tech.min.js"></script>

  <script>
    // Register Amazon IVS tech
    registerIVSTech(videojs);

    // Initialize IVS Player with Amazon IVS tech
    var ivsPlayer = videojs("ivs-player", {
      techOrder: ["AmazonIVS"]
    }, () => {
      // Set the IVS stream URL
      ivsPlayer.src("https://e759d28da8d9.ap-northeast-1.playback.live-video.net/api/video/v1/ap-northeast-1.648078772342.channel.sC3cxpRBqR1t.m3u8");
      
      // Auto-play when ready
      ivsPlayer.ready(() => {
        ivsPlayer.play().catch(e => {
          console.log('Autoplay prevented:', e);
        });
      });
    });

    // Error handling
    ivsPlayer.on('error', (e) => {
      console.error('Player error:', e);
    });

    // Player events
    ivsPlayer.on('loadstart', () => {
      console.log('Loading stream...');
    });

    ivsPlayer.on('canplay', () => {
      console.log('Stream ready to play');
    });
  </script>
</body>
</html>